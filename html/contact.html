<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link rel="stylesheet" href="css/contact.css" />
    <link rel="stylesheet" href="css/index.css" />
    <link rel="website icon" href="image/logo.png" />
    <title>contact</title>
  </head>
  <body>
    <main class="nav-bar">
      <div id="nav-img">
        <a href="index.html"><img src="image/logo.png" alt="#" /></a>
      </div>
      <div class="topnav">
        <div id="menu">
          <li><a href="blog.html">blog</a></li>
          <li><a href="signup.html">sign up</a></li>
          <li>
            <button><a href="login.html">log-in</a></button>
          </li>
        </div>

        <a href="javascript:void(0);" class="icon" onclick="myFunction()">
          <i class="fa fa-bars"></i
        ></a>
      </div>
    </main>
    <section>
      <div class="container-section">
        <h1>hello,</h1>
        <div id="desc">
          <p>
            I can help in design and build your desirable website.Let me know
            what you need by using following information.
          </p>
        </div>
        <div id="contact">
          <p>E-mail: <span>kylesjet1@gmail.com</span></p>
          <p>On internet: <span> linkedin/github/facebook.</span></p>
          <p>WhatsApp & telephone: <span>+250 787827372</span></p>
        </div>
        <div id="contactme">
          <h2>contact me</h2>
          <div id="error"></div>
          <div id="success"></div>
          <label for="name">name</label>
          <input type="text" id="input" name="username" />
          <label for="email">E-mail</label>
          <input type="email" name="email" id="email">
          <label for="message">message</label>
          <textarea name="message" id="textarea"></textarea>
          <button onclick="validateMessage()">send</button>
        </div>
      </div>
    </section>
    <footer>
      <div id="icons">
        <a href=""> <i class="fa fa-github"></i></a>
        <a href=""><i class="fa fa-linkedin"></i></a>
        <a href=""><i class="fa fa-facebook"></i></a>
      </div>
      <hr />
      <div id="copy">
        <p>&copy /2022</p>
        <p></p>
      </div>
    </footer>
    <script>
      function myFunction() {
        var x = document.getElementById("menu");
        if (x.style.display === "block") {
          x.style.display = "none";
        } else {
          x.style.display = "block";
        }
      }
      // a method to validate the messages
      function validateMessage() {
        // array and the object to store user inputs
        var messages = [];
        const message = {
          id: Date.now(),
          userName: document.getElementsByName("username")[0].value,
          userEmail:document.getElementsByName("email")[0].value,
          userMessage: document.getElementsByName("message")[0].value,
        };
        // check user inputs
        let pattern = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;

        if (!message.userName) {
          error.style.display = "block";
          error.innerHTML = "Your name is required";
        } else if (message.userName.length < 3) {
          error.style.display = "block";
          error.innerHTML = "Your name may be short";
        }else if (!message.userEmail ) {
          error.style.display ='block'
          error.innerHTML ='email is required'
        }else if (!((message.userEmail).match(pattern))) {
          error.style.display='block'
          error.innerHTML='email is invalid'
        }
        else if (!message.userMessage) {
          error.style.display = "block";
          error.innerHTML = "Your message can not be empty";
        } else if (message.userMessage.length < 5) {
          error.style.display = "block";
          error.innerHTML = "Your message is a bit short";
        } else {
          // saving the infos to the local storage
          if (localStorage.getItem("message") === null) {
            messages.push(message);
            localStorage.setItem("message", JSON.stringify(messages));
            location.reload();
          } else {
            let stored = JSON.parse(localStorage.getItem("message"));
            stored.push(message);
            localStorage.setItem("message", JSON.stringify(stored));
            location.reload();
          }
        }
      }

    </script>
  </body>
</html>
